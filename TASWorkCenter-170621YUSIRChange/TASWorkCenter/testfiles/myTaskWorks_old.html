<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>TAS Work Center</title>
		<link rel="stylesheet" type="text/css" href="js/bootstrap.min.css" />
		<script src="js/jquery-3.1.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>

		<script type="text/javascript" src="js/menu.js"></script>
		<link rel="stylesheet" type="text/css" href="css/baseStyle.css" />
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<!--表格cssjs-->
		<link rel="stylesheet" type="text/css" href="css/tableStyle.css" />
		<link rel="stylesheet" type="text/css" href="js/bootstrap-table.css" />
		<script src="js/bootstrap-table.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/bootstrap-table-zh-CN.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="css/projectStyle.css" />
		<style type="text/css">

		</style>
		<script type="text/javascript">
			$(document).ready(function() {
				//编辑按钮事件
				$("#project_edit").on("click", function() {
					$('.projectEdit').show();
					$('#completeTask').show();
					$('#submitFileToReviewDiv').hide();
					$('.projectDescription').hide();
				});
				$("#project_cancel").on("click", function() {
					$('.projectEdit').hide();
					$('.projectDescription').show();
				});
				$("#loadUpFileForReview_btn").on("click", function() {
					$('.projectEdit').show();
					$('#completeTask').hide();
					$('#submitFileToReviewDiv').show();
					$('.projectDescription').hide();
				});
				//				$("#edit_submit_btn").on("click", function() {
				//					//					$("#myModal").modal('show')
				//					$('.projectEdit').hide();
				//					$('.projectDescription').show();
				//				});
				//按填写数字添加文件个数
				$('#add_files_01').on('click', function() {
					var num = $('.filesNum_01').val();
					if(num == undefined || num > 10) {
						return;
					}
					for(var i = 0; i < num; i++) {
						var content = "<tr><td>";
						content += "<input type='file' accept='.pdf' name='file1_" + (i + 1) + "' style ='display:inline-block'><input type='button' class='btn btn-primary btn-xs' value='remove' onclick='remove(this,1)' style ='display:inline-block'>";
						content += "</td></tr>"
						$(".fileTable_01").append(content);
					}
					if(num > 0) {
						$("#add_files_01").attr("disabled", true); 
					}
					
				});
				$('#add_files_02').on('click', function() {
					var num = $('.filesNum_02').val();
					if(num == undefined || num > 10) {
						return;
					}
					for(var i = 0; i < num; i++) {
						var content = "<tr><td>";
						content += "<input type='file' accept='.doc,.docx' name='file2_" + (i + 1) + "' style ='display:inline-block'><input type='button' class='btn btn-primary btn-xs' value='remove' onclick='remove(this,2)' style ='display:inline-block'>";
						content += "</td></tr>"
						$(".fileTable_02").append(content);
					}
					if(num > 0) {
						$("#add_files_02").attr("disabled", true);
					}
				});
			});
			//删除当前行<tr>
			function remove(obj,value) {
				$(obj).parent().parent().remove();
				//删除后获取table所剩行数
				if (value == 1) {
					var t01 = $(".fileTable_01 tr").length;
					alert(t01 ,typeof(t01));
					$('.filesNum_01').val(t01);
					if (t01 == 0) {
						$("#add_files_01").attr("disabled", false); 
					}
					
				} else if (value == 2) {
					var t02 = $(".fileTable_02 tr").length;
					$('.filesNum_02').val(t02);
					if (t02 == 0) {
						$("#add_files_02").attr("disabled", false); 
					}
				}
				
			}
		</script>
	</head>

	<body>
		<div class="header">
			<div class="header_logo">
				<div class="logo">
					<img src="img/logo.png" />
				</div>
				<div class="title">
					<h1>并联科技个人工作中心</h1>
				</div>
			</div>
			<div class="userInfo">
				<h4><span class="glyphicon glyphicon-user" aria-hidden="true"></span> 姓名:</h4>
				<p>Neo</p>
				<h4><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> 部门:</h4>
				<p>开发部</p>
				<h4><span class="glyphicon glyphicon-briefcase" aria-hidden="true"></span> 职位:</h4>
				<p>前端工程师</p>
				<a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> 个人中心</a>
				<a href="login.html"><span class="glyphicon glyphicon-off" aria-hidden="true"></span> 注销</a>
			</div>
		</div>
		<div class="mainContent">
			<div class="leftNav">
				<!-- Contenedor -->
				<ul id="accordion" class="accordion">
					<li>
						<div class="link"><i class="glyphicon glyphicon-tasks"></i>个人中心 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-home" aria-hidden="true"></span>
								<a href="index.html">我的主页</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-road" aria-hidden="true"></span>
								<a href="myTasks.html">我的任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
								<a href="mySettings.html">我的设置</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-list-alt" aria-hidden="true"></i> 工作任务 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
								<a href="createTask.html">创建新任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-paperclip" aria-hidden="true"></span>
								<a href="createWorklist.html">创建新工作</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
								<a href="reviewTask.html">考核审批</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
								<a href="arrangedWork.html">待安排工作</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-folder-close"></i>合约管理 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span>
								<a href="myContractManagement.html">我的合约</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
								<a href="createContractManagement.html">新建合约</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-retweet" aria-hidden="true"></span>
								<a href="contractManagement.html">服务合约</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-link"></i>服务管理 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
								<a href="serviceManagementCustomerCenter.html">客户服务中心</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-indent-right" aria-hidden="true"></span>
								<a href="ServiceManagerServiceStandards.html">服务标准管理</a>
							</li>
						</ul>
					</li>
					<!--<li>
						<div class="link"><i class="glyphicon glyphicon-fire"></i>评价 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
								<a href="evaluatedTask.html">待评价任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
								<a href="ViewJobEvaluation.html">任务工作评价</a>
							</li>
						</ul>
					</li>-->
					<li>
						<div class="link"><i class="glyphicon glyphicon-leaf"></i>统计 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-stats" aria-hidden="true"></span>
								<a href="taskWorkStatistics.html">工作任务统计</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span>
								<a href="memberStatistics.html">员工管理</a>
							</li>
						</ul>
					</li>
				</ul>
				<p id="time"></p>
			</div>
			<div class="rightContent">
				<!--面包屑-->
				<ol class="breadcrumb">
					<li>
						<a href="#">个人中心</a>
					</li>
					<li>
						<a href="myTasks.html">我的任务</a>
					</li>
					<li class="active">该任务的工作列表</li>
				</ol>

				<div class="projectDescription container-fluid">
					<!--style="background: #EBCCCC;"-->
					<div class="row">
						<div class="work_title col-md-8">
							<h4>任务名称：</h4>
							<h1><strong>【1314】</strong>开发工作个人中心平台</h1>
						</div>
						<div class="col-sm-4" style="text-align: right;">
							<button class="btn btn-info" type="submit" id="project_edit">
							<span class="glyphicon glyphicon-edit" aria-hidden="true"></span> 编辑</button>
						</div>
					</div>
					<div class="partingLine"></div>

					<div class="row">
						<div class="col-sm-4">
							<p>任务单ID:</p>
							<p class="">1314
								<p>
						</div>
						<div class="col-sm-4">
							<p>任务类型:</p>
							<p class="">技术性任务
								<p>
						</div>
						<div class="col-sm-4">
							<p>优先级:</p>
							<p class="red">最高
								<p>
						</div>

					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>创建人:</p>
							<p class="">某某某
								<p>
						</div>
						<div class="col-sm-4">
							<p>发布人:</p>
							<p class="">钱经理
								<p>
						</div>
						<div class="col-sm-4">
							<p>考核人:</p>
							<p class="">某某某
								<p>
						</div>

					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>任务种类:</p>
							<p class="">团队任务
								<p>
						</div>
						<div class="col-sm-4">
							<p>负责人:</p>
							<p class="">某某某
								<p>
						</div>
						<div class="col-sm-4">
							<p>参与成员:</p>
							<p class="">成员1,成员2,成员3,成员4
								<p>
						</div>

					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>任务种类:</p>
							<p class="">个人任务
								<p>
						</div>
						<div class="col-sm-4">
							<p>指派给:</p>
							<p class="">某某某
								<p>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>起止时间:</p>
							<p class="">2017/03/01-2017/05/01
								<p>
						</div>
						<div class="col-sm-4">
							<p>任务状态:</p>
							<p class="">进行中
								<p>
						</div>
						<div class="col-sm-4">
							<p>审核状态:</p>
							<p class="">未审核
								<p>
						</div>

					</div>

					<div class="partingLine"></div>

					<div id="keyWord_div">
						<label>关键字:</label>
						<label>关键字1，关键字2，关键字3，关键字4</label>
					</div>
					<div class="work_description">
						<label>工作描述:</label>
						<p>
							Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam id dolor id nibh ultricies vehicula.</p>
						<br />
						<p>
							Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Donec ullamcorper nulla non metus auctor fringilla.
						</p>

					</div>
					<!--<div class="partingLine"></div>
					<div class="beizhu">
						<label>备注：</label>
						<p>优先级最高，优先完成！！！</p>
					</div>-->
					<div class="partingLine"></div>
					<label>附件：</label>
					<div id="">
						<label>需要上传审核文件资料</label>&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-xs btn-warning" id="loadUpFileForReview_btn">上传文件</button>
					</div>
					
					<div id="attachmentDiv">
						<a href="">"文件名1"</a><br />
						<a href="">"文件名2"</a>
					</div>
					<div class="partingLine"></div>

					<!--表格开始-->
					<div>
						<h3>任务隶属工作列表</h3>
						<table id="myWorkTable"></table>
					</div>
					<!--表格结束-->

					<!--<div class="comment_score">
						<h4>评价内容：</h4>
						<p>任务未完成，暂无评价</p>
					</div>-->
				</div>

				<!--projectDescription-->
				<div class="projectEdit">
					<!--名字-->
					<div class="row">
						<div class="work_title col-md-8">
							<h4>工作名称：</h4>
							<h1>[303]</h1>
							<h1>开发前端</h1>
						</div>
						<!--取消按钮-->
						<div class="col-sm-4" style="text-align: right;">
							<button class="btn btn-danger" type="submit" id="project_cancel">
							<span class="glyphicon glyphicon-edit" aria-hidden="true"></span> 取消</button>
						</div>
					</div>
					<div class="partingLine">——</div>
					<div id="completeTask" style="display: none;">

						<form id="submit_change" action="" method="get">
							<legend>更改提交信息</legend>
							<div class="TaskSubmitBody">
								<label for="complete">工作状态：</label>
								<select name="complete" id="complete" class="form-control">
									<option value="已发布">已发布</option>
									<option value="进行中" selected>进行中</option>
									<option value="已完成">已完成</option>
									<option value="已结束">已结束</option>
								</select>
								<label for="sendTo">提交给：</label>
								<select name="sendTo" id="sendTo" class="form-control">
									<option value="于桂成" selected>于桂成</option>
									<option value="何志文">何志文</option>
									<option value="周平川">周平川</option>
									<option value="朱慧泽">朱慧泽</option>
									<option value="徐春财">徐春财</option>
									<option value="宋建平">宋建平</option>
									<option value="张 璟">张璟</option>
									<option value="彭 鹏">彭鹏</option>
									<option value="洪坤宇">洪坤宇</option>
									<option value="刘海运">刘海运</option>
									<option value="吴天浩">吴天浩</option>
									<option value="程鑫鑫">程鑫鑫</option>
									<option value="董浩伟">董浩伟</option>
									<option value="胡心波">胡心波</option>
									<option value="王焱">王焱</option>
								</select>
								<label>完成时间：</label>
								<p class="endTime"></p>
								<script type="text/javascript">
									var mydate = new Date();
									$(".endTime").text(mydate.toLocaleString()); //获取日期与时间
								</script>
								<label id="edit_textareaname" for="edit_result">项目总结：</label>
								<textarea name="edit_result" id="edit_result" rows="7" cols="120" placeholder="请在此输入项目总结和注意事项等内容..."></textarea>
								<style type="text/css">
									/*设置placeholder颜色*/
									
									#edit_result::-webkit-input-placeholder {
										color: #D6D0CA;
									}
								</style>
								<div class="inputfiles">
									<label id="InputFile_label">提交文件：</label>
									<label for="filesNum_02">需要上传</label>
									<input type="text" name="filesNum_02" class="filesNum_02" value="" />
									<label for="filesNum_02">个文件</label>
									<button type="button" class="btn btn-default" id="add_files_02"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>添加</button>
									<div class="filesInputDiv">
										<table class="fileTable_02">
											<!--文件区域-->
										</table>
									</div>
								</div>
								<input id="edit_submit_btn_1" class="btn btn-primary edit_submit_btn" type="submit" value="提交信息" />
							</div>

						</form>
					</div>
					
					<div id="submitFileToReviewDiv" style="display: none;">

						<form id="submitFileToReview" action="" method="get">
							<legend>提交任务文件去审核</legend>
							<div class="TaskSubmitBody">
								
								<label for="sendTo">提交给：</label>
								<select name="sendTo" id="sendTo" class="form-control">
									<option value="于桂成" selected>于桂成</option>
									<option value="何志文">何志文</option>
									<option value="周平川">周平川</option>
									<option value="朱慧泽">朱慧泽</option>
									<option value="徐春财">徐春财</option>
									<option value="宋建平">宋建平</option>
									<option value="张 璟">张璟</option>
									<option value="彭 鹏">彭鹏</option>
									<option value="洪坤宇">洪坤宇</option>
									<option value="刘海运">刘海运</option>
									<option value="吴天浩">吴天浩</option>
									<option value="程鑫鑫">程鑫鑫</option>
									<option value="董浩伟">董浩伟</option>
									<option value="胡心波">胡心波</option>
									<option value="王焱">王焱</option>
								</select>
								<label>完成时间：</label>
								<p class="endTime"></p>
								<script type="text/javascript">
									var mydate = new Date();
									$(".endTime").text(mydate.toLocaleString()); //获取日期与时间
								</script>
								<div class="inputfiles">
									<label id="InputFile_label">提交文件：</label>
									<label for="filesNum_01">需要上传</label>
									<input type="text" name="filesNum_01" class="filesNum_01" value="" />
									<label for="filesNum_01">个文件</label>
									<button type="button" class="btn btn-default" id="add_files_01"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>添加</button>
									<div class="filesInputDiv">
										<table class="fileTable_01">
											<!--文件区域-->
										</table>
									</div>
								</div>
								<input id="edit_submit_btn_2" class="btn btn-primary edit_submit_btn" type="submit" value="提交信息" />
							</div>

						</form>
					</div>

					<div class="partingLine"></div>
				
				</div>
				<!--projectEdit-->
			</div>

			<script type="text/javascript">
				$('#myWorkTable').bootstrapTable({
					classes: "table table-bordered",
					cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
					uniqueId: "ID", //每一行的唯一标识，一般为主键列
					clickToSelect: true, //是否启用点击选中行
					rowStyle: function(row, index) {
						//这里有5个取值代表5中颜色['active', 'success', 'info', 'warning', 'danger'];
						var strClass = "";
						if(row.worksend != "于桂成") { //就是不等于我的显示灰色
							strClass = 'gray';
						} else {
							if(row.workstatus == "进行中") {
								strClass = 'info'; //还有一个active
							} else if(row.workstatus == "延期中") {
								strClass = 'danger';
							} else if(row.workstatus == "提交中") {
								strClass = 'warning';
							} else if(row.workstatus == "已完成") {
								strClass = 'success';
							}
						}

						return { classes: strClass }
					},
					columns: [{
						field: 'workid',
						title: '工作单ID',
						align: 'center',
						valign: 'middle',
					}, {
						field: 'workname',
						title: '工作名称',
						align: 'center',
						valign: 'middle',
						formatter: 'workNameFormatter'
					}, {
						field: 'worktype',
						title: '工作类别',
						align: 'center',
						valign: 'middle'
					}, {
						field: 'worksend',
						title: '指派给',
						align: 'center',
						valign: 'middle',
						sortable: true,
					}, {
						field: 'worklevel',
						title: '优先级',
						align: 'center',
						valign: 'middle',
					}, {
						field: 'worktimeperiod',
						title: '工作起止时间',
						align: 'center',
						valign: 'middle',
					}, {
						field: 'workstatus',
						title: '工作状态',
						align: 'center',
						valign: 'middle',
					}],
					data: [{
						workid: 1,
						workname: '前端系统前端系统前端系统前端系统前端系统前端系统前端系统',
						worktype: '开发',
						worksend: '同事1',
						worklevel: '紧急',
						worktimeperiod: '2017-04-01 - 2017-05-01',
						workstatus: '延期中',
					}, {
						workid: 2,
						workname: '前端系统',
						worktype: '维护',
						worksend: '同事2',
						worklevel: '优先',
						worktimeperiod: '2017-04-01 - 2017-05-01',
						workstatus: '延期中',
					}, {
						workid: 3,
						workname: 'oa系统',
						worktype: '应约',
						worksend: '同事3',
						worklevel: '普通',
						worktimeperiod: '2017-04-03 - 2017-05-09',
						workstatus: '提交中',
					}, {
						workid: 4,
						workname: 'oa系统',
						worktype: '开发',
						worksend: '于桂成',
						worklevel: '紧急',
						worktimeperiod: '2017-04-03 - 2017-05-09',
						workstatus: '提交中',
					}, {
						workid: 5,
						workname: 'oa系统后台开发',
						worktype: '开发',
						worksend: '于桂成',
						worklevel: '优先',
						worktimeperiod: '2017-04-15 - 2017-05-20',
						workstatus: '进行中',
					}],

				});

				function disableLink(link) {
					//link.disabled = true;     
					link.setAttribute("disabled", true);
					link.removeAttribute('href');
				}
				//工作主题设置
				function workNameFormatter(value, row, index) {
					var nameString = "";
					if(value.length > 20) {
						nameString = value.substring(0, 20) + '...';
					} else {
						nameString = value;
					}
					if(row.worksend != '于桂成') { //不是我的任务无法点击不用显示a标签
						return nameString;
					} else {
						return [
							'<a href="projectDescription.html">' + nameString + '</a>',
						].join('');
					}
				}
			</script>
	</body>

</html>