<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>TAS Work Center</title>
		<link rel="stylesheet" type="text/css" href="js/bootstrap.min.css" />
		<script src="js/jquery-3.1.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>

		<script type="text/javascript" src="js/menu.js"></script>
		<link rel="stylesheet" type="text/css" href="css/baseStyle.css" />
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<!--表格cssjs-->
		<link rel="stylesheet" type="text/css" href="css/tableStyle.css" />
		<link rel="stylesheet" type="text/css" href="js/bootstrap-table.css" />
		<script src="js/bootstrap-table.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/bootstrap-table-zh-CN.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="css/projectStyle.css" />
		<!--打分-->
		<script src="js/YUStarScore.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="js/YUStarScore.css" />
		<!--vue-->
		<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			#endTime {
				display: inline-block;
				width: 250px;
			}
		</style>
		<script type="text/javascript">
			$(document).ready(function() {
				//编辑按钮事件
				$("#project_edit").on("click", function() {
					$('.projectEdit').show();
					$('.projectDescription').hide();
				});
				$("#project_cancel").on("click", function() {
					$('.projectEdit').hide();
					$('.projectDescription').show();
				});
			});
		</script>
	</head>

	<body>
		<div class="header">
			<div class="header_logo">
				<div class="logo">
					<img src="img/logo.png" />
				</div>
				<div class="title">
					<h1>并联科技个人工作中心</h1>
				</div>
			</div>
			<div class="userInfo">
				<h4><span class="glyphicon glyphicon-user" aria-hidden="true"></span> 姓名:</h4>
				<p>Neo</p>
				<h4><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> 部门:</h4>
				<p>开发部</p>
				<h4><span class="glyphicon glyphicon-briefcase" aria-hidden="true"></span> 职位:</h4>
				<p>前端工程师</p>
				<a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> 个人中心</a>
				<a href="login.html"><span class="glyphicon glyphicon-off" aria-hidden="true"></span> 注销</a>
			</div>
		</div>
		<div class="mainContent">
			<div class="leftNav">
				<!-- Contenedor -->
				<ul id="accordion" class="accordion">
					<li>
						<div class="link"><i class="glyphicon glyphicon-tasks"></i>个人中心 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-home" aria-hidden="true"></span>
								<a href="index.html">我的主页</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-road" aria-hidden="true"></span>
								<a href="myTasks.html">我的任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
								<a href="mySettings.html">我的设置</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-list-alt" aria-hidden="true"></i> 工作任务 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
								<a href="createNewWorkGate.html">创建新工作</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
								<a href="reviewTask.html">考核审批</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
								<a href="arrangedWork.html">待安排工作</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-folder-close"></i>合约管理 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span>
								<a href="myContractManagement.html">我的合约</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
								<a href="createContractManagement.html">新建合约</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-retweet" aria-hidden="true"></span>
								<a href="contractManagement.html">服务合约</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-link"></i>服务管理 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-bookmark" aria-hidden="true"></span>
								<a href="serviceManagementCustomerCenter.html">客户服务中心</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-indent-right" aria-hidden="true"></span>
								<a href="ServiceManagerServiceStandards.html">服务标准管理</a>
							</li>
						</ul>
					</li>
					<!--<li>
						<div class="link"><i class="glyphicon glyphicon-fire"></i>评价 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
								<a href="evaluatedTask.html">待评价任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
								<a href="ViewJobEvaluation.html">任务工作评价</a>
							</li>
						</ul>
					</li>-->
					<li>
						<div class="link"><i class="glyphicon glyphicon-leaf"></i>统计 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-stats" aria-hidden="true"></span>
								<a href="taskWorkStatistics.html">工作任务统计</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span>
								<a href="memberStatistics.html">员工管理</a>
							</li>
						</ul>
					</li>
				</ul>
				<p id="time"></p>
			</div>
			<div class="rightContent">
				<!--面包屑-->
				<ol class="breadcrumb">
					<li>
						<a href="#">个人中心</a>
					</li>
					<li>
						<a href="myTasks.html">我的任务</a>
					</li>
					<li class="active">该任务的工作列表</li>
				</ol>

				<div class="projectDescription container-fluid">
					<!--style="background: #EBCCCC;"-->
					<div class="row">
						<div class="work_title col-md-8">
							<h4>单一任务：</h4>
							<h4><strong>【1314】</strong>开发工作个人中心平台</h4>
						</div>
						<div class="col-sm-4" style="text-align: right;float: right;">
							<button class="btn btn-info" type="submit" id="project_edit">
							<span class="glyphicon glyphicon-edit" aria-hidden="true"></span> 编辑</button>
						</div>
					</div>
					<div class="partingLine"></div>

					<div class="row">
						<div class="col-sm-4">
							<p>任务单ID:</p>
							<p class="">1314
								<p>
						</div>
						<div class="col-sm-4">
							<p>任务类型:</p>
							<p class="">技术性任务
								<p>
						</div>
						<div class="col-sm-4">
							<p>优先级:</p>
							<p class="red">最高
								<p>
						</div>

					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>创建人:</p>
							<p class="">某某某
								<p>
						</div>
						<div class="col-sm-4">
							<p>发布人:</p>
							<p class="">钱经理
								<p>
						</div>
						<div class="col-sm-4">
							<p>考核人:</p>
							<p class="">某某某
								<p>
						</div>

					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>任务种类:</p>
							<p class="">团队任务
								<p>
						</div>
						<div class="col-sm-4">
							<p>负责人:</p>
							<p class="">某某某
								<p>
						</div>
						<div class="col-sm-4">
							<p>参与成员:</p>
							<p class="">成员1,成员2,成员3,成员4
								<p>
						</div>

					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>任务种类:</p>
							<p class="">个人任务
								<p>
						</div>
						<div class="col-sm-4">
							<p>指派给:</p>
							<p class="">某某某
								<p>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-4">
							<p>起止时间:</p>
							<p class="">2017/03/01-2017/05/01
								<p>
						</div>
						<div class="col-sm-4">
							<p>任务状态:</p>
							<p class="">进行中
								<p>
						</div>
						<div class="col-sm-4">
							<p>审核状态:</p>
							<p class="">未提交
								<p>
						</div>

					</div>

					<div class="partingLine"></div>

					<div id="keyWord_div">
						<label>关键字:</label>
						<label>关键字1，关键字2，关键字3，关键字4</label>
					</div>
					<div class="work_description">
						<label>工作描述:</label>
						<p>
							Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam id dolor id nibh ultricies vehicula.</p>
						<br />
						<p>
							Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec ullamcorper nulla non metus auctor fringilla. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Donec ullamcorper nulla non metus auctor fringilla.
						</p>

					</div>

					<div class="partingLine"></div>

					<!--表格开始-->
					<div>
						<h4>任务隶属工作列表</h4>
						<table id="myWorkTable"></table>
					</div>
					<!--表格结束-->

					<div class="comment_score">
						<h4>评价内容：</h4>
						<p>任务未完成，暂无评价</p>
						<div class="table-responsive" style="width: 600px;">
							<table class="table table-striped table-bordered table-hover" id="scoreTable">
								<!--table table-striped table-bordered table-hover-->
								<thead>
									<tr>
										<th>成员</th>
										<th>得分</th>

									</tr>
								</thead>
								<tbody>
									<tr>
										<td>成员1</td>
										<td>
											<div>
												<ul class="rating showscore" id="">
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li>
														<p class="score"></p>
													</li>
												</ul>
											</div>
										</td>

									</tr>
									<tr>
										<td>成员2</td>
										<td>
											<div>
												<ul class="rating showscore" id="">
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li>
														<p class="score"></p>
													</li>
												</ul>
											</div>
										</td>
									</tr>
									<tr>
										<td>成员3</td>
										<td>
											<div>
												<ul class="rating showscore" id="">
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li>
														<p class="score"></p>
													</li>
												</ul>
											</div>
										</td>

									</tr>
									<tr>
										<td>成员4</td>
										<td>
											<div>
												<ul class="rating showscore" id="">
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li class="rating_item"></li>
													<li>
														<p class="score"></p>
													</li>
												</ul>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>

				</div>

				<!--projectDescription-->
				<div class="projectEdit" style="height: 350px;">
					<!--名字-->
					<div class="form-group col-md-12">
						<div class="work_title col-md-8">
							<h4>单一任务：</h4>
							<h4>开发个人工作中心</h4>
						</div>
						<!--取消按钮-->
						<div class="col-sm-4" style="text-align: right;">
							<button class="btn btn-sm btn-danger" type="submit" id="project_cancel">
							<span class="glyphicon glyphicon-edit" aria-hidden="true"></span> 取消</button>
						</div>
					</div>
					<form class="form-inline" id="submit_change" action="" method="get">
						<div class="form-group col-md-12">
							<h5>完成后请提交任务</h5>
						</div>
						<div class="form-group col-md-12">
							<div class="col-md-3">
								<label for="completeTask">任务状态：</label>
								<select name="completeTask" id="completeTask" class="form-control">
									<option value="进行中" selected>进行中</option>
									<option value="已完成">已完成</option>
								</select>
							</div>
							<div class="col-md-3">
								<label for="sendTo">提交审核：</label>
								<select name="sendTo" id="sendTo" class="form-control">
									<option value="" selected>Qian</option>
								</select>
							</div>
							<div class="col-md-4">
								<label>完成时间：</label>
								<label class="form-control" id="endTime"></label>
								<script type="text/javascript">
									var mydate = new Date();
									$("#endTime").text(mydate.toLocaleString()); //获取日期与时间
								</script>
							</div>
						</div>
						<div class="form-group col-md-12">
							<h5>给成员进行评价</h5>
						</div>
						<div class="form-group col-md-12">
							<div class="col-md-12">
								<div class="rating_div">
									<label for="">成员1：</label>
									<ul class="rating" id="rating">
										<li class="rating_item" title="很不好"></li>
										<li class="rating_item" title="不好"></li>
										<li class="rating_item" title="一般"></li>
										<li class="rating_item" title="好"></li>
										<li class="rating_item" title="很好"></li>
										<li>
											<p class="score"></p>
										</li>
									</ul>
									<label for="comments_1">成员1：</label>
									<input type="text" id="comments_1" class="form-control" style="width: 50%;" value="" />
								</div>
							</div>
							<div class="member col-md-12">
								<div class="rating_div">
									<label for="">成员2：</label>
									<ul class="rating" id="rating1">
										<li class="rating_item" title="很不好"></li>
										<li class="rating_item" title="不好"></li>
										<li class="rating_item" title="一般"></li>
										<li class="rating_item" title="好"></li>
										<li class="rating_item" title="很好"></li>
										<li>
											<p class="score"></p>
										</li>
									</ul>
									<label for="comments_1">成员1：</label>
									<input type="text" id="comments_1" class="form-control" style="width: 50%;" value="" />
								</div>
							</div>
							<div class="member col-md-12">
								<div class="rating_div">
									<label for="">成员3：</label>
									<ul class="rating" id="rating2">
										<li class="rating_item" title="很不好"></li>
										<li class="rating_item" title="不好"></li>
										<li class="rating_item" title="一般"></li>
										<li class="rating_item" title="好"></li>
										<li class="rating_item" title="很好"></li>
										<li>
											<p class="score"></p>
										</li>
									</ul>
									<label for="comments_1">成员1：</label>
									<input type="text" id="comments_1" class="form-control" style="width: 50%;" value="" />
								</div>
								
							</div>

						</div>
						<div class="row col-md-12">
							<input id="edit_submit_btn_1" class="btn btn-primary edit_submit_btn" type="submit" value="提交任务" />
						</div>
					</form>

				</div>
				<!--projectEdit-->
			</div>

			<script type="text/javascript">
				$('#myWorkTable').bootstrapTable({
					classes: "table table-bordered",
					cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
					uniqueId: "ID", //每一行的唯一标识，一般为主键列
					clickToSelect: true, //是否启用点击选中行
					rowStyle: function(row, index) {
						//这里有5个取值代表5中颜色['active', 'success', 'info', 'warning', 'danger'];
						var strClass = "";
						
						if(row.workstatus == "进行中") {
							strClass = 'info'; //还有一个active
						} else if(row.workstatus == "延期中") {
							strClass = 'danger';
						} else if(row.workstatus == "提交中") {
							strClass = 'warning';
						} else if(row.workstatus == "已完成") {
							strClass = 'success';
						}


						return {
							classes: strClass
						}
					},
					columns: [{
						field: 'workid',
						title: '工作单ID',
						align: 'center',
						valign: 'middle',
					}, {
						field: 'workname',
						title: '工作名称',
						align: 'center',
						valign: 'middle',
						formatter: 'workNameFormatter'
					}, {
						field: 'worktype',
						title: '工作类别',
						align: 'center',
						valign: 'middle'
					}, {
						field: 'worksend',
						title: '指派给',
						align: 'center',
						valign: 'middle',
						sortable: true,
					}, {
						field: 'worklevel',
						title: '优先级',
						align: 'center',
						valign: 'middle',
					}, {
						field: 'worktimeperiod',
						title: '工作起止时间',
						align: 'center',
						valign: 'middle',
					}, {
						field: 'workstatus',
						title: '工作状态',
						align: 'center',
						valign: 'middle',
					}],
					data: [{
						workid: 1,
						workname: '前端系统前端系统前端系统',
						worktype: '开发',
						worksend: '同事1',
						worklevel: '紧急',
						worktimeperiod: '2017-04-01 - 2017-05-01',
						workstatus: '延期中',
					}, {
						workid: 2,
						workname: '前端系统',
						worktype: '维护',
						worksend: '同事2',
						worklevel: '优先',
						worktimeperiod: '2017-04-01 - 2017-05-01',
						workstatus: '延期中',
					}, {
						workid: 3,
						workname: 'oa系统',
						worktype: '应约',
						worksend: '同事3',
						worklevel: '普通',
						worktimeperiod: '2017-04-03 - 2017-05-09',
						workstatus: '提交中',
					}, {
						workid: 4,
						workname: 'oa系统',
						worktype: '开发',
						worksend: '同事4',
						worklevel: '紧急',
						worktimeperiod: '2017-04-03 - 2017-05-09',
						workstatus: '已完成',
					}
//					, {
//						workid: 5,
//						workname: 'oa系统后台开发',
//						worktype: '开发',
//						worksend: '于桂成',
//						worklevel: '优先',
//						worktimeperiod: '2017-04-15 - 2017-05-20',
//						workstatus: '进行中',
//					}
					],

				});

				function disableLink(link) {
					//link.disabled = true;     
					link.setAttribute("disabled", true);
					link.removeAttribute('href');
				}
				//工作主题设置
				function workNameFormatter(value, row, index) {
					var nameString = "";
					if(value.length > 20) {
						nameString = value.substring(0, 20) + '...';
					} else {
						nameString = value;
					}
					
					return [
						'<a href="projectDescription.html">' + nameString + '</a>',
					].join('');
				}
			</script>

			<script>
				//评分展示
				$('.showscore').rating({
					mode:'lightHalf',
					num:4.5,
					readOnly: true,
				});
				
				//此处的打分系统个数是根据项目成员个数来定
				//此为自己写的jquery插件。 设置模式是打半星，初始化num为0，不点亮
				$('#rating').rating({
					mode: 'lightHalf',
					num: 0,
				});
				//打分完成解绑事件无法再次打分
				$('#rating').on('chosen', function() {
					$('#rating').rating('unbindEvent');
				});

				$('#rating1').rating({
					mode: 'lightHalf',
					num: 0,
				});
				$('#rating1').on('chosen', function() {
					$('#rating1').rating('unbindEvent');
				});
				$('#rating2').rating({
					mode: 'lightHalf',
					num: 0,
				});
				$('#rating2').on('chosen', function() {
					$('#rating2').rating('unbindEvent');
				});
				new Vue({
					el: '#pieces',
					data: {
						piecesArray: [{
							name: '我的工作1',
							isDelay: true,
							message: '已延期',
							url: 'submitBasisWayWork.html',
							ps: '立即处理>>'
						}]
					}
				})
			</script>
	</body>

</html>