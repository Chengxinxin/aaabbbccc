<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>TAS Work Center</title>
		<link rel="stylesheet" type="text/css" href="js/bootstrap.min.css" />
		<script src="js/jquery-3.1.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>

		<script type="text/javascript" src="js/menu.js"></script>
		<link rel="stylesheet" type="text/css" href="css/loginStyle.css" />
		<link rel="stylesheet" type="text/css" href="css/baseStyle.css" />
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<!--表格cssjs-->
		<link rel="stylesheet" type="text/css" href="js/bootstrap-table.css" />
		<script src="js/bootstrap-table.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/bootstrap-table-zh-CN.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="css/tableStyle.css" />
		<!--多选插件-->
		<link rel="stylesheet" type="text/css" href="js/bootstrap-select.min.css" />
		<script src="js/bootstrap-select.min.js"></script>
		<style type="text/css">

		</style>
	</head>

	<body>
		<div class="header">
			<div class="header_logo">
				<div class="logo">
					<img src="img/logo.png" />
				</div>
				<div class="title">
					<h1>并联科技个人工作中心</h1>
				</div>
			</div>
			<div class="userInfo">
				<h4><span class="glyphicon glyphicon-user" aria-hidden="true"></span> 姓名:</h4>
				<p>Neo</p>
				<h4><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> 部门:</h4>
				<p>开发部</p>
				<h4><span class="glyphicon glyphicon-briefcase" aria-hidden="true"></span> 职位:</h4>
				<p>前端工程师</p>
				<a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> 个人中心</a>
				<a href="login.html"><span class="glyphicon glyphicon-off" aria-hidden="true"></span> 注销</a>
			</div>
		</div>
		<div class="mainContent">
			<div class="leftNav">
				<!-- Contenedor -->
				<ul id="accordion" class="accordion">
					<li>
						<div class="link"><i class="glyphicon glyphicon-tasks"></i>个人中心 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-home" aria-hidden="true"></span>
								<a href="index.html">我的主页</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-road" aria-hidden="true"></span>
								<a href="myTasks.html">我的任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
								<a href="mySettings.html">我的设置</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-list-alt" aria-hidden="true"></i> 工作任务 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
								<a href="createTask.html">创建新任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-paperclip" aria-hidden="true"></span>
								<a href="createWorklist.html">创建新工作</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
								<a href="reviewTask.html">考核审批</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
								<a href="arrangedWork.html">待安排工作</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-fire"></i>评价 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-star-empty" aria-hidden="true"></span>
								<a href="evaluatedTask.html">待评价任务</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
								<a href="ViewJobEvaluation.html">任务工作评价</a>
							</li>
						</ul>
					</li>
					<li>
						<div class="link"><i class="glyphicon glyphicon-leaf"></i>统计 <i class="glyphicon glyphicon-menu-down"></i></div>
						<ul class="submenu">
							<li>
								<span class="glyphicon glyphicon-stats" aria-hidden="true"></span>
								<a href="taskWorkStatistics.html">工作任务统计</a>
							</li>
							<li>
								<span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span>
								<a href="memberStatistics.html">员工统计</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
			<div class="rightContent" style="">
				<!--面包屑-->
				<ol class="breadcrumb">
					<li>
						<a href="#">工作任务</a>
					</li>
					<li class="active">待安排工作表 </li>
				</ol>
				<div class="row">
					<div class="col-md-2"><label for="frequencyType" class="control-label">请您选择待安排周期：</label></div>
					<div class="col-md-2">
						<select name="frequencyType" id="frequencyType" class="form-control">
							<option value="0">一月</option>
							<option value="1">二月</option>
							<option value="2">一周</option>
							<option value="3">一天</option>
						</select>
					</div>
				</div>

				<table id="arrangedWorkTable"></table>

			</div>
			<!--rightContent-->
		</div>
		<!--mainContent-->
		<script type="text/javascript">
			//好气啊，网上方下面可以我放下面第一次无法绑定事件，其他操作后才绑定，只能放上面了加载就绑定了
			window.operateEvents = {
				'click .createArranged': function(e, value, row, index) {
					location.href = "createWorklist.html";
					//todo把此行数据页面传值过去
				},
				'click .remove': function(e, value, row, index) {
					$('#myModal').modal("show")
					$('#myModalLabel').text("是否删除待安排工作单ID-"+row.workid+" : "+row.workname);
					$('#confirm_button').text('确认删除');
					$('.deletework').show();
					$('#confirm_button').on('click', function() {
						$table.bootstrapTable('remove', {
						field: 'workid',
						values: [row.workid]
						});
						$('#myModal').modal('hide')//关闭模态框
					});
					
				}
			};
			var $table = $('#arrangedWorkTable');
			$('#arrangedWorkTable').bootstrapTable({
				cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
				pageList: [5, 10, 25, 50], //可供选择的每页的行数（*）
				search: true, //是否显示表格搜索，此搜索是客户端搜索，不会进服务端，所以，个人感觉意义不大
				searchAlign: 'left',
				pagination: true, //是否显示分页（*）
				sidePagination: "client", //分页方式：client客户端分页，server服务端分页（*）
				pageNumber: 1, //初始化加载第一页，默认第一页
				pageSize: 10, //每页的记录行数（*）
				paginationPreText: '上一页',
				paginationNextText: '下一页',
				uniqueId: "workid", //每一行的唯一标识，一般为主键列
				//				clickToSelect: true, //是否启用点击选中行
				showToggle: true, //是否显示详细视图和列表视图的切换按钮
				cardView: false, //是否显示详细视图
				showColumns: true, //是否显示所有的列
				showRefresh: true, //是否显示刷新按钮
				minimumCountColumns: 2, //最少允许的列数
				//				height: 550, //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
				rowStyle: function(row, index) {
					//这里有5个取值代表5中颜色['active', 'success', 'info', 'warning', 'danger'];
					var strClass = "";
					if(row.workrate == "一月一次") {
						strClass = 'info'; //还有一个active
					} else if(row.workrate == "一月四次") {
						strClass = 'danger';
					} else if(row.workrate == "一月两次") {
						strClass = 'warning';
					} else if(row.workrate == "两月一次") {
						strClass = 'success';
					} else {
						return {};
					}
					return { classes: strClass }
				},
				columns: [{
					field: 'workid',
					title: '工作单ID',
					align: 'center',
					valign: 'middle',
					sortable: true,
				}, {
					field: 'workname',
					title: '工作名称',
					align: 'center',
					valign: 'middle',
					formatter: 'taskNameFormatter'
				}, {
					field: 'workplace',
					title: '用户现场',
					align: 'center',
					valign: 'middle'
				}, {
					field: 'production',
					title: '产品',
					align: 'center',
					valign: 'middle',
					sortable: true,
				}, {
					field: 'workrate',
					title: '工作频率',
					align: 'center',
					valign: 'middle',
					sortable: true,
					formatter: 'displaycolor'
				}, {
					field: 'preference',
					title: '偏好',
					align: 'center',
					valign: 'middle',
					formatter: 'preferenceFormatter'
				}, {
					field: 'isassign',
					title: '是否新建',
					align: 'center',
					valign: 'middle',
					events: 'operateEvents',
					formatter: 'buttonFormatter',
				}],
				data: [{
					workid: 1,
					workname: '前端系统前端系统前端系统前端系统前端系统前端系统前端系统',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月四次',
					preference: '星期一星期二下午两点以后',
				}, {
					workid: 2,
					workname: '前端系统',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 3,
					workname: 'oa系统',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月一次',
					preference: '下午两点以后',
				}, {
					workid: 4,
					workname: 'oa系统',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '两月一次',
					preference: '下午两点以后',
				}, {
					workid: 5,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 6,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 7,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 8,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 9,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 10,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 11,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 12,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 13,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 14,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}, {
					workid: 15,
					workname: 'oa系统后台开发',
					workplace: '上海电力',
					production: 'DLP',
					workrate: '一月两次',
					preference: '下午两点以后',
				}],

			});

			$('.search input').attr("placeholder", "快速模糊搜索");

			function displaycolor(value, row, index) {
				var a = "";
				if(value == "一月四次") {
					var a = '<span class="text-danger">' + value + '<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span>' + '</span>';
				} else if(value == "一月两次") {
					var a = '<span class="text-warning">' + value + '<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span>' + '</span>';
				} else if(value == "一月一次") {
					var a = '<span class="text-primary">' + value + '<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span>' + '</span>';
				} else if(value == "二月一次") {
					var a = '<span class="text-success">' + value + '<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span>' + '</span>';
				} else {
					var a = '<span class="text-info">' + value + '<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span>' + '</span>';
				}
				return a;
			}
			//任务主题
			function taskNameFormatter(value, row, index) {
				var nameString = "";
				if(value.length > 20) {
					nameString = value.substring(0, 20) + '...';
				} else {
					nameString = value;
				}
				return [
					'<a href="#"data-toggle="tooltip" title=' + value + '>' + nameString + '</a>',
				].join('');
			}
			//偏好主题
			function preferenceFormatter(value, row, index) {
				var nameString = "";
				if(value.length > 6) {
					nameString = value.substring(0, 6) + '...';
				} else {
					nameString = value;
				}
				return [
					'<a href="#" data-toggle="tooltip" title=' + value + '>' + nameString + '</a>',
				].join('');
			}
			//新建按钮
			function buttonFormatter(value, row, index) {
				return [
					'<button  class="createArranged btn btn-primary btn-xs"><i class="glyphicon glyphicon-file"></i> 新建</button>',
					'<button  class="remove btn btn-danger btn-xs"><i class="glyphicon glyphicon-remove"></i> 删除</button>'

				].join(' '); //空格
			}
			

			
			$(document).ready(function() {

				//工作属性多选函数
				$('#participants').selectpicker({
					'selectedText': 'cat'
				});
				
			});
		</script>

		<!-- 模态框（Modal） -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
						<h4 class="modal-title" id="myModalLabel">再次确认发布</h4>
					</div>
					<div class="modal-body">
						<p class="deletework"><br />请您再次确认是否删除此待安排工作事项，删除后不可恢复。</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<button type="button" class="btn btn-primary" id="confirm_button">确认</button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<!-- /.modal -->
	</body>

</html>